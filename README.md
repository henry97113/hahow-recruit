# Superheroes Demo

Hahow å¾µæ‰å°å°ˆæ¡ˆï¼Œå¯ä»¥è‡³ [https://superherosdemo.netlify.com](https://superherosdemo.netlify.com) æŸ¥çœ‹ç·šä¸Šç‰ˆæœ¬

## å°ˆæ¡ˆç‰¹é»

- ä½¿ç”¨[è‡ªè¡Œè£½ä½œ](https://github.com/henry97113/typescript-create-react-app)çš„ TypeScript React template
- æ²’æœ‰ä½¿ç”¨ç¬¬ä¸‰æ–¹ library ç®¡ç†å…±ç”¨ç‹€æ…‹ï¼Œå–®ç´”ä½¿ç”¨ React å…§å»ºå·¥å…· & Hooks API
- å…¨éƒ¨ components çš†ç‚º functional componentï¼Œæ­é… Hooks ç®¡ç†ç‹€æ…‹ã€å‰¯ä½œç”¨

## åŸºæœ¬ç’°å¢ƒéœ€æ±‚

- node
- yarn

## ä½¿ç”¨æ–¹å¼

### å®‰è£æ‰€éœ€å¥—ä»¶

```sh
yarn
```

### é–‹å•Ÿ localhost

```sh
yarn start
# åœ¨ç€è¦½å™¨é–‹å•Ÿ http://localhost:8080
```

### æ‰“åŒ…å°ˆæ¡ˆ

```sh
yarn build
# å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­æœƒç”¢ç”Ÿ dist è³‡æ–™å¤¾
```

## ä½¿ç”¨å·¥å…·

å°ˆæ¡ˆå¾ç„¡åˆ°æœ‰æ‰€ä½¿ç”¨çš„å·¥å…·/æŠ€è¡“

### ä½¿ç”¨æŠ€è¡“

- [React.js](https://reactjs.org)
- [TypeScript](https://www.typescriptlang.org/)
  - ç‚º JavaScript å®šç¾©å‹åˆ¥ï¼Œä»¥æ¸›å°‘å‡ºç¾ bug çš„æ©Ÿæœƒï¼Œä¾‹å¦‚å®šç¾©å‚³å…¥ component çš„ propsï¼Œä¸€ä½†å¤šå‚³/å°‘å‚³ï¼Œæˆ–æ˜¯å‚³å…¥çš„å‹åˆ¥ä¸æ­£ç¢º TS éƒ½æœƒå ±éŒ¯
  - åœ¨ TS å¯ä»¥ä½¿ç”¨åœ¨å…¶ä»–å¼·å‹åˆ¥èªè¨€æ‰æœ‰çš„é¡å‹ï¼Œåƒæ˜¯ interface, enum ç­‰ç­‰ã€‚é€é TypeScript çš„ç·¨è­¯å™¨å°‡ TS è½‰ç‚ºä¸€èˆ¬ JSï¼Œè€Œä¸Šé¢æåˆ° JS æ²’æœ‰çš„é¡å‹å‰‡ä¸æœƒå‡ºç¾åœ¨ç·¨è­¯å¾Œçš„ç¨‹å¼ç¢¼ã€‚
- [React Router](https://github.com/ReactTraining/react-router)
  - è¨­å®šå‰ç«¯è·¯ç”±ä½¿ç”¨ï¼Œæ˜¯è£½ä½œ SPA ä¸å¯æˆ–ç¼ºçš„å·¥å…·é¸é …ä¹‹ä¸€
  - å¯ä»¥é¸æ“‡åœ¨ component ä¸­è¨­å®šè·¯å¾‘ï¼Œæˆ–æ˜¯ä½¿ç”¨ `react-router-config` é›†ä¸­ç®¡ç†
  - é›–ç„¶å¥½ç”¨ä½†æ–‡ä»¶å¯«å¾—ä¸å¥½ï¼Œå¯ä»¥ä½œç‚ºå€Ÿé‘’
- [Styled Components](https://www.styled-components.com/)
  - component çš„æ¦‚å¿µå°‡ HTML - CSS - JS çµåˆåœ¨ä¸€èµ·ï¼Œè€Œæ¨£å¼æ’°å¯«æ”¹ç‚ºä»¥ CSS-in-JS çš„æ–¹å¼ï¼Œè€Œ styled-components ç‚ºè§£æ±ºæ–¹æ¡ˆä¹‹ä¸€
  - å°‡æ¨£å¼å¯«ç‚ºç¨ç«‹çš„ componentï¼Œä»¥æ–¹ä¾¿é‡è¤‡ä½¿ç”¨
  - æ¯”èµ·ä½¿ç”¨ä¸€èˆ¬ CSS - className è¨­å®šæ¨£å¼çš„æ–¹å¼çš„å¥½è™•æ˜¯å¯ä»¥å­˜å–è©² component çš„ props/state é€²è€Œè¨­å®šå°æ‡‰æ¨£å¼ï¼Œåä¹‹éœ€è¦ä½¿ç”¨ inline style çš„æ–¹å¼è¨­å®šï¼Œè€Œ inline style å¯«èµ·ä¾†ä¸æ–¹ä¾¿ä¸”å®¹æ˜“é¡¯å¾—é›œäº‚ï¼Œæˆ‘èªç‚ºéå¿…è¦æ‡‰ç›¡é‡é¿å…
- [Tailwind CSS](https://tailwindcss.com/)
  - ç”±æ–¼åŒæ™‚ä½¿ç”¨ styled-components ä»¥åŠ tailwind è¨­å®šæ¨£å¼ï¼Œæˆ‘å°‡ä½¿ç”¨æ™‚æ©Ÿå€åˆ†ç‚º
    - ã€Œæ’ç‰ˆã€ä½¿ç”¨ tailwind
    - ã€Œæ¨£å¼ã€ä½¿ç”¨ styled-components
  - é›–ç„¶æ’ç‰ˆä½¿ç”¨ styled-components ä¹Ÿå¯ä»¥åšåˆ°ç›¸åŒæ•ˆæœï¼Œä½†ä½¿ç”¨é€™ç¨® utility-first CSS åœ¨æ’ç‰ˆå¯ä»¥çœä¸‹ä¸å°‘èª¿æ•´çš„æ™‚é–“

### å°ˆæ¡ˆéƒ¨ç½²

- [Netlify](https://www.netlify.com/)

## å°ˆæ¡ˆæ¶æ§‹

æˆ‘çš„åˆ†é¡é‚è¼¯æ˜¯ï¼š

- æ ¹ç›®éŒ„ä¸»è¦æ”¾ç’°å¢ƒ/å…¨åŸŸè¨­å®šç›¸é—œçš„æª”æ¡ˆ
- web é–‹ç™¼ç›¸é—œé …ç›®éƒ½æ”¾åœ¨ `src` è³‡æ–™å¤¾

### æ ¹ç›®éŒ„

å„ç¨®å·¥å…·çš„è¨­å®šæª”å±…å¤š

    .
    |____node_modules
    |____.git
    |____README.md
    |____yarn.lock
    |____package.json
    |____.gitignore
    |____tsconfig.json
    |____.eslintrc.js
    |____.prettierrc.js
    |____tailwind.config.js
    |____postcss.config.js
    |____webpack.common.js
    |____webpack.dev.js
    |____webpack.prod.js
    |____src

- `tsconfig.json`: TypeScript è¨­å®šï¼Œä¾‹å¦‚ç·¨è­¯æ–¹å¼ä»¥åŠè¦ç·¨è­¯çš„æª”æ¡ˆé¡å‹
- `prettierrc`: è¨­å®š Prettierã€‚ä½¿ç”¨ Prettier æ ¼å¼åŒ–ç¨‹å¼ç¢¼
- `.eslintrc.js`: è¨­å®š ESLintã€‚å› ç‚ºæœ‰ä½¿ç”¨ TypeScript & Prettierï¼ŒESLint å…§è¦å¦å¤–è¨­å®šä¸€ä¸‹ï¼Œå¦å‰‡ Prettier æ ¼å¼åŒ–çš„çµæœå¯èƒ½æœƒèˆ‡ ESLint è¡çª
- `tailwind.config.js`: å®¢è£½åŒ– Tailwind CSS ç”¨
- `postcss.config.js`: è¨­å®š postcssã€‚å°ˆæ¡ˆå…§ç”¨æ–¼è™•ç† Tailwind CSS ä½¿ç”¨ã€‚æœƒå°‡ tailwind.css è½‰ç‚ºä¸€èˆ¬ CSSï¼Œä¸¦ç”¢ç”Ÿæª”æ¡ˆ index.css
- Webpack: å…±ä¸‰å€‹è¨­å®šæª”æ¡ˆ
  - `webpack.common.js`: è™•ç†é–‹ç™¼/æ‰“åŒ…å…±é€šçš„é …ç›®
  - `webpack.dev.js`: é–‹ç™¼éœ€è¦ï¼†æ‰“åŒ…æ™‚ä¸éœ€è¦çš„é …ç›®
  - `webpack.prod.js`: æ‰“åŒ…éœ€è¦ï¼†é–‹ç™¼æ™‚ä¸éœ€è¦çš„é …ç›®
  ä½¿ç”¨ `webpack-merge` åˆä½µ common & dev/prod è¨­å®š

### `src` è³‡æ–™å¤¾

web çš„ä¸»è¦çµæ§‹

    .
    |____components
    | |____Hero
    | |____shared
    |____constants
    |____context
    |____hooks
    |____images
    |____models
    |____routing
    |____styles
    |____utilities
    |____index.css
    |____index.tsx
    |____index.html

ä¾ç…§ä¸åŒåŠŸèƒ½åŠéœ€æ±‚å‰µå»ºè³‡æ–™å¤¾ï¼†æª”æ¡ˆï¼š

- `/components`: å°‡æ‰€æœ‰ components é›†ä¸­ç®¡ç†ï¼Œ
  - ä¸€èˆ¬ component å¦‚ä¸»é¡Œç›¸é—œé›†ä¸­å­˜æ”¾åœ¨åŒä¸€è³‡æ–™å¤¾
  - æœƒå…±ç”¨çš„ component éƒ½æ”¾ç½®åœ¨ `/shared` è³‡æ–™å¤¾
- `/constants`: æ”¾ç½®ä¸€ä½†è³¦å€¼å³ä¸æœƒæ›´æ”¹çš„ constantsï¼Œä¾‹å¦‚ API endpoint æˆ–æ˜¯ reducer ä¸­ action çš„ type
- `/context`: æ­¤å°ˆæ¡ˆæ²’æœ‰ä½¿ç”¨ Redux ç®¡ç†å…±ç”¨çš„ç‹€æ…‹ï¼Œè€Œæ˜¯ä½¿ç”¨ React åŸç”Ÿçš„ context & hooksã€‚æ­¤è³‡æ–™å¤¾å­˜æ”¾ä¸åŒä¸»é¡Œçš„ context
- `/hooks`: æ”¾ç½® custom hooks
- `/images`: æ”¾ç½®æ‰€æœ‰åœ–ç‰‡é¡å‹çš„æª”æ¡ˆ
- `/models`: æ”¾ç½®å®šç¾©å‹åˆ¥çš„ interface
- `/routing`: é›†ä¸­ç®¡ç†å‰ç«¯è·¯ç”±çš„è·¯å¾‘
- `/styles`: æ”¾ç½®ç¬¬ä¸‰æ–¹ CSS æ¡†æ¶çš„æ¨£å¼
- `/utilities`: å¯ä»¥å…±ç”¨çš„ helper functions éƒ½æ”¾åœ¨é€™è£¡ï¼Œå¯ä»¥å†ä¾ä¸åŒé¡å‹åˆ†æª”æ¡ˆ
- `index.html`: ç¶²ç«™ä½¿ç”¨çš„ HTML æ¨¡æ¿
- `index.tsx`: æ•´å€‹ç¶²ç«™çš„é€²å…¥é»
- `index.css`: ç¬¬ä¸‰æ–¹ CSS æ¡†æ¶çš„æ¨£å¼æœƒè¢«ä¸€èµ·è¢« Post CSS è™•ç†ä¸¦æ”¾åœ¨é€™è£¡

## å¯«è¨»è§£çš„åŸå‰‡

åŸå‰‡ä¸Šæˆ‘èªç‚ºå¥½çš„ç¨‹å¼ç¢¼ä¸éœ€è¦æœ‰è¨»è§£ï¼Œæˆ–æ˜¯æ‡‰è©²è¿½æ±‚ä¸éœ€è¦è¨»è§£ä¹Ÿèƒ½ç†è§£ç¨‹å¼å…§å®¹

ä½†å¦‚æœéœ€è¦å¯«ï¼Œæˆ‘æœƒéµå®ˆä»¥ä¸‹åŸå‰‡ï¼š

- ç‚ºä½•æˆ‘è¦é€™éº¼åšï¼Œè€Œéæˆ‘åšäº†ä»€éº¼

é€™ä»½ç¨‹å¼æˆ‘åªå¯«äº†ä¸€æ®µè¨»è§£ï¼š

```javascript
/**
 * CustomLoader å¤–å±¤çš„å…ƒç´ éœ€è¦æœ‰å±¬æ€§ position: relative ä½œç‚ºéŒ¨é»
 */
```

åŸå› æ˜¯ CustomLoader ä¸­æœ‰è¨­å®š `position: absolute`ï¼Œå› æ­¤å¤–å±¤éœ€è¦æœ‰éŒ¨é»ä½œç‚ºåƒè€ƒä¾æ“šã€‚ç‚ºäº†é¿å…å…¶ä»–äººä½¿ç”¨æ™‚å›°é›£æ•…åŠ ä¸Šè¨»è§£ã€‚

## é‡åˆ°çš„å›°é›£/å•é¡Œ

### è¨­å®šç¬¬ä¸‰æ–¹ CSS æ¡†æ¶

ç”±æ–¼æ˜¯ç¬¬ä¸€æ¬¡å¼•ç”¨ç¬¬ä¸‰æ–¹ CSS æ¡†æ¶åˆ°å°ˆæ¡ˆä¸­ï¼Œéµç…§ Tailwind å®˜ç¶²çš„æ•™å­¸ä¸€é–‹å§‹æœ‰é»çœ‹ä¸æ‡‚ï¼Œå¾Œä¾†æœå°‹ç¶²è·¯æ•™å­¸æ–‡ç« ï¼Œçœ‹å®Œä¸”ç†è§£å¾Œå»ºç½®å®Œæˆã€‚å†å›å»çœ‹å®˜ç¶²æ•™å­¸å°±çœ‹å¾—æ‡‚äº†

### è©²ä½¿ç”¨ Tailwind é‚„æ˜¯ styled-components è¨­å®šæ¨£å¼

ä¸€é–‹å§‹ç”¨ Tailwind è¨­å®šå¾—å¾ˆé–‹å¿ƒï¼Œå¾Œä¾†é©šè¦ºæˆ‘éƒ½æ²’æœ‰ç”¨åˆ° styled-componentsï¼Œæƒ³ä¸€ä¸‹å¾Œç¢ºå®šäº†å…©è€…åˆ†åˆ¥é©åˆçš„ä½¿ç”¨æ™‚æ©Ÿ

### è·¯ç”±å•é¡Œé€ æˆ `bundle.js` ç„¡æ³•è®€å–

é‡åˆ°çš„å•é¡Œèˆ‡[ç¶²å‹](https://stackoverflow.com/questions/47894330/error-if-direct-url-of-react-router-with-params-is-passed-to-browser)ç›¸åŒå°±ä¸è´…è¿°äº†ï¼Œæ¸¬è©¦å¾Œç™¼ç¾æ˜¯ webpack è¨­å®šå•é¡Œï¼Œé€ æˆ `bundle.js` ç„¡æ³•è¢«è®€å–åˆ°ï¼Œä¿®æ”¹è·¯å¾‘å¾Œè§£æ±ºå•é¡Œ

### ä½¿ç”¨ React Hooks

é€™æ¬¡æƒ³è¦è—‰æ©Ÿç©ä¸€ä¸‹ä¸ç†Ÿæ‚‰çš„ react hooksï¼Œå°±åœ¨ä¸€é–‹å§‹ç¢ºå®šäº†åªç”¨ functional component + hooks å–ä»£ class componentã€‚å‰›é–‹å§‹æœ‰é»ä¸ç†Ÿæ‚‰ï¼Œä½†å¾Œä¾†æ…£å¾Œæ¼¸æ¼¸ä¸Šæ‰‹å°±é †æ‰‹è¨±å¤šã€‚æˆ‘è¦ºå¾—é€™æ¨£å¯«èµ·ä¾†èªæ„ååˆ†æ¸…æ¥šï¼Œæ­é… custom hooks å¾Œ component é¡¯å¾—æ¸…çˆ½è¨±å¤š

### ä½¿ç”¨ React.context + hooks ç®¡ç†å…±ç”¨ç‹€æ…‹

æœƒæƒ³ä½¿ç”¨ React.context + hooks ç®¡ç†å…±ç”¨ç‹€æ…‹æ˜¯å› ç‚º[é€™ç¯‡æ–‡ç« ](https://kentcdodds.com/blog/application-state-management-with-react)ï¼Œä½œè€…å¼·åŠ›æ¨è–¦é€™ç¨®æ–¹å¼ï¼Œå¥½è™•æ˜¯ä¸ç”¨å¦å¤–ä½¿ç”¨ç¬¬ä¸‰æ–¹ library ä¸”å¯ä»¥æ‡‰ç”¨èˆ‡ Redux ç›¸åŒçš„æ¦‚å¿µ

é›–ç„¶å› ç‚ºéœ€è¦å…±åŒä½¿ç”¨çš„ç‹€æ…‹å¤ªå°‘ï¼Œæˆ‘å¯¦éš›æ‡‰ç”¨çš„æ™‚é–“å¾ˆå°‘ï¼Œä½†è·Ÿ Hooks ä¸€æ¨£ï¼Œç•¶æ¸…æ¥šé‚è¼¯å¾Œå°±è®Šå¾—ååˆ†å¥½ç”¨

æˆ‘è¦ºå¾—é€™ç¨®æ–¹å¼åœ¨å°å‹ç¨‹å¼è »é©ç”¨çš„ï¼Œä½†é‚„ä¸ç¢ºå®šå¤§å‹æ‡‰ç”¨ä½¿å¦å¯è¡Œ

ç›®å‰å° hooks éå¸¸æœ‰èˆˆè¶£ï¼Œå¸Œæœ›æœ‰äººä¸€èµ·è¨è«–å…¶å®ƒæ›´æœ‰è¶£çš„ç”¨æ³• ğŸ¤“

### éƒ¨ç½²åˆ° Netlify å¾Œç¶²å€ç„¡æ³•è¨ªå•

é€™å€‹å•é¡Œè·Ÿå°ˆæ¡ˆæœ¬èº«æ²’æœ‰å¤ªå¤šé—œä¿‚ï¼Œç™¼ç”ŸåŸå› æ˜¯ Netlify æœ‰è‡ªå·±çš„ [è½‰å€è¦å‰‡](https://www.netlify.com/docs/redirects/)ï¼Œé€ æˆå¦‚æœæœ‰ä½¿ç”¨å‰ç«¯è·¯ç”±çš„è©±æœƒå‡ºéŒ¯ã€‚è§£æ±ºæ–¹æ³•æ˜¯åŠ å…¥ `_redirects` æª”æ¡ˆåˆ° build ä¹‹å¾Œçš„è³‡æ–™å¤¾ä¸­ï¼Œè®“ Netlify ä¾ç…§æŒ‡å®šè¦å‰‡è½‰å€ã€‚

æœŸé–“ç‚ºäº†ç ”ç©¶å¦‚ä½•è¤‡è£½æª”æ¡ˆè‡³ build å¾Œçš„è³‡æ–™å¤¾ï¼Œå†æ¬¡è¤‡ç¿’äº† Webpack ä»¥åŠå­¸ç¿’ä½¿ç”¨ `copy-webpack-plugin`

### å¿ƒå¾—

é€™æ¬¡åšä¸‹ä¾†é›–ç„¶é‡åˆ°æ¯”æˆ‘é æœŸçš„é‚„å¤šå•é¡Œï¼Œä½†è§£æ±ºå•é¡Œçš„éç¨‹é‚„æ˜¯å­¸åˆ°ä¸å°‘æ±è¥¿ï¼Œåƒæ˜¯æ›´ç†Ÿæ‚‰ Webpack è¨­å®šã€å­¸ç¿’ Tailwind ç­‰ç­‰

## å…¶å®ƒ

æˆ‘æœ‰å·å·æ”¾ä¸€å€‹å°é©šå–œï¼æ‰¾æ‰¾çœ‹å§ï¼

- åœ¨ç¶²å€ `/heroes` å¯ä»¥è¢«è§¸ç™¼
- éµç›¤äº‹ä»¶è§¸ç™¼

[åŸå§‹å°ˆæ¡ˆèªªæ˜](frontend.md)
